<div class="ma_page_content">
    <div class="ma_pc_inner">
        <div class="page_padding">
            <!-- Settings -->
            <div class="sett_page">
                <?php echo loadPage("settings/sidebar"); ?>
                <div class="st_content">
                    <div class="st_form">
                        <h3>{{LANG Interest}} {{LANG Settings}}</h3>
						<form method="post" action="" id="general-form">
							<div class="alert alert-warning alert-empty" id="output-interest-errors"></div>
							<div class="alert alert-success alert-empty" id="output-interest-success"></div>
							<div class="ma_interest">
								<div class="ma_interest_innr">
									<svg class="mb-3" height="110" viewBox="-66 0 512 512.00198" width="110" xmlns="http://www.w3.org/2000/svg"><path d="m130.917969 43.566406c0 18.507813-15.007813 33.515625-33.519531 33.515625-18.507813 0-33.515626-15.007812-33.515626-33.515625 0-18.511718 15.007813-33.515625 33.515626-33.515625 18.511718 0 33.519531 15.003907 33.519531 33.515625zm0 0" fill="#ffda44"/><path d="m250.105469 43.566406c0 18.507813-15.007813 33.515625-33.515625 33.515625-18.511719 0-33.515625-15.007812-33.515625-33.515625 0-18.511718 15.003906-33.515625 33.515625-33.515625 18.507812 0 33.515625 15.003907 33.515625 33.515625zm0 0" fill="#5a5a5a"/><path d="m369.292969 43.566406c0 18.507813-15.003907 33.515625-33.515625 33.515625-18.511719 0-33.515625-15.007812-33.515625-33.515625 0-18.511718 15.003906-33.515625 33.515625-33.515625 18.511718 0 33.515625 15.003907 33.515625 33.515625zm0 0" fill="#ffda44"/><path d="m250.105469 147.195312c0 18.511719-15.007813 33.515626-33.515625 33.515626-18.511719 0-33.515625-15.003907-33.515625-33.515626 0-18.511718 15.003906-33.515624 33.515625-33.515624 18.507812 0 33.515625 15.003906 33.515625 33.515624zm0 0" fill="#5a5a5a"/><path d="m369.292969 147.195312c0 18.511719-15.003907 33.515626-33.515625 33.515626-18.511719 0-33.515625-15.003907-33.515625-33.515626 0-18.511718 15.003906-33.515624 33.515625-33.515624 18.511718 0 33.515625 15.003906 33.515625 33.515624zm0 0" fill="#5a5a5a"/><path d="m369.292969 250.824219c0 18.511719-15.003907 33.515625-33.515625 33.515625-18.511719 0-33.515625-15.003906-33.515625-33.515625 0-18.507813 15.003906-33.515625 33.515625-33.515625 18.511718 0 33.515625 15.007812 33.515625 33.515625zm0 0" fill="#ffda44"/><path d="m242.21875 295.84375v-38.722656c0-5.910156-2.523438-11.539063-6.933594-15.476563-2.929687-2.613281-6.40625-4.246093-10.023437-4.914062-7.9375-1.464844-15.964844 2.160156-20.570313 8.789062-3.25 4.679688-4.992187 10.242188-4.992187 15.9375v17.824219-55.699219c0-6.65625-3.425781-12.839843-9.070313-16.367187l-.601562-.375c-.054688-.035156-.113282-.070313-.171875-.109375-9.382813-5.777344-21.675781-2.550781-27.34375 6.902343-2.28125 3.808594-4.164063 8.945313-4.164063 15.542969v39.621094-64.667969c0-5.589844-2.179687-10.960937-6.078125-14.972656-7.765625-7.996094-20.355469-8.722656-28.992187-1.675781-4.347656 3.542969-6.867188 8.851562-6.867188 14.460937v61.03125-129.457031c0-5.839844-2.445312-11.414063-6.742187-15.371094-8.496094-7.828125-21.730469-7.277343-29.550781 1.230469l-.132813.144531c-3.542969 3.855469-5.511719 8.902344-5.511719 14.144531v163.671876l-1.835937-9.804688c-2.257813-12.03125-6.351563-23.640625-12.144531-34.417969l-3.65625-6.804687c-5.488282-10.214844-14.8125-17.824219-25.917969-21.15625-6.960938-2.089844-14.464844.710937-18.355469 6.855468-2.8125 4.445313-3.296875 9.976563-1.296875 14.839844l16.535156 40.207032c6.589844 16.019531 9.980469 33.171874 9.980469 50.496093v10.261719c0 12.433594 4.9375 24.355469 13.730469 33.148438l18.359375 18.359374c6.304687 6.304688 9.84375 14.851563 9.84375 23.769532v31.503906h145.609375v-36.992188c0-5.484374 1.734375-10.828124 4.953125-15.265624l3.820312-5.269532c5.277344-7.277344 8.117188-13.027344 8.117188-22.015625" fill="#f2d1a5"/><path d="m238.382812 501.898438-.074218-47.074219-174.425782.046875.074219 47.078125zm0 0" fill="#5ecef4"/><path d="m97.398438 87.132812c24.023437 0 43.566406-19.546874 43.566406-43.566406 0-24.023437-19.542969-43.566406-43.566406-43.566406-24.019532 0-43.566407 19.542969-43.566407 43.566406 0 24.019532 19.546875 43.566406 43.566407 43.566406zm0-67.035156c12.941406 0 23.46875 10.527344 23.46875 23.46875 0 12.9375-10.527344 23.464844-23.46875 23.464844-12.9375 0-23.464844-10.527344-23.464844-23.464844 0-12.941406 10.527344-23.46875 23.464844-23.46875zm0 0"/><path d="m216.589844 0c-24.023438 0-43.566406 19.542969-43.566406 43.566406 0 24.019532 19.542968 43.566406 43.566406 43.566406 24.023437 0 43.566406-19.546874 43.566406-43.566406 0-24.023437-19.546875-43.566406-43.566406-43.566406zm0 67.03125c-12.941406 0-23.46875-10.527344-23.46875-23.464844 0-12.941406 10.527344-23.46875 23.46875-23.46875 12.9375 0 23.464844 10.527344 23.464844 23.46875 0 12.9375-10.527344 23.464844-23.464844 23.464844zm0 0"/><path d="m335.777344 87.132812c24.023437 0 43.566406-19.546874 43.566406-43.566406 0-24.023437-19.542969-43.566406-43.566406-43.566406-24.023438 0-43.566406 19.542969-43.566406 43.566406 0 24.019532 19.542968 43.566406 43.566406 43.566406zm0-67.035156c12.9375 0 23.46875 10.527344 23.46875 23.46875 0 12.9375-10.53125 23.464844-23.46875 23.464844-12.941406 0-23.46875-10.527344-23.46875-23.464844 0-12.941406 10.527344-23.46875 23.46875-23.46875zm0 0"/><path d="m216.589844 103.628906c-24.023438 0-43.566406 19.542969-43.566406 43.566406 0 24.023438 19.542968 43.566407 43.566406 43.566407 24.023437 0 43.566406-19.542969 43.566406-43.566407 0-24.023437-19.546875-43.566406-43.566406-43.566406zm0 67.035156c-12.941406 0-23.46875-10.527343-23.46875-23.46875 0-12.9375 10.527344-23.464843 23.46875-23.464843 12.9375 0 23.464844 10.527343 23.464844 23.464843 0 12.941407-10.527344 23.46875-23.464844 23.46875zm0 0"/><path d="m335.777344 103.628906c-24.023438 0-43.566406 19.542969-43.566406 43.566406 0 24.023438 19.542968 43.566407 43.566406 43.566407 24.023437 0 43.566406-19.542969 43.566406-43.566407 0-24.023437-19.542969-43.566406-43.566406-43.566406zm0 67.035156c-12.941406 0-23.46875-10.527343-23.46875-23.46875 0-12.9375 10.527344-23.464843 23.46875-23.464843 12.9375 0 23.46875 10.527343 23.46875 23.464843 0 12.941407-10.53125 23.46875-23.46875 23.46875zm0 0"/><path d="m335.777344 207.257812c-24.023438 0-43.566406 19.546876-43.566406 43.566407 0 24.023437 19.542968 43.566406 43.566406 43.566406 24.023437 0 43.566406-19.542969 43.566406-43.566406 0-24.019531-19.542969-43.566407-43.566406-43.566407zm0 67.035157c-12.941406 0-23.46875-10.527344-23.46875-23.46875 0-12.941407 10.527344-23.464844 23.46875-23.464844 12.9375 0 23.46875 10.523437 23.46875 23.464844 0 12.941406-10.53125 23.46875-23.46875 23.46875zm0 0"/><path d="m238.414062 408.234375 3.820313-5.269531c6.195313-8.542969 10.03125-16.195313 10.03125-27.914063 0-5.550781-4.5-10.050781-10.046875-10.050781-5.550781 0-10.050781 4.5-10.050781 10.050781 0 5.863281-1.390625 9.476563-6.203125 16.117188l-3.824219 5.269531c-4.488281 6.195312-6.863281 13.511719-6.863281 21.164062v26.945313h-125.511719v-21.457031c0-11.664063-4.542969-22.628906-12.789063-30.875l-18.359374-18.359375c-6.957032-6.957031-10.789063-16.207031-10.789063-26.042969v-10.261719c0-18.726562-3.609375-37.003906-10.734375-54.320312l-16.53125-40.203125c-.761719-1.847656-.578125-3.957032.492188-5.640625 1.472656-2.328125 4.339843-3.398438 6.976562-2.609375 8.613281 2.585937 15.695312 8.367187 19.953125 16.285156l3.65625 6.804688c5.308594 9.882812 9.050781 20.488281 11.117187 31.515624l1.839844 9.804688c.953125 5.101562 5.640625 8.640625 10.804688 8.15625 5.167968-.480469 9.121094-4.816406 9.121094-10.007812v-163.675782c0-2.726562 1.015624-5.332031 2.863281-7.339844l.132812-.148437c1.960938-2.132813 4.640625-3.378906 7.539063-3.496094 2.910156-.121093 5.667968.894531 7.804687 2.859375 2.222657 2.046875 3.496094 4.957032 3.496094 7.980469v129.457031c0 5.550782 4.5 10.050782 10.050781 10.050782 5.550782 0 10.050782-4.5 10.050782-10.050782v-61.03125c0-2.597656 1.152343-5.03125 3.167968-6.675781 4.632813-3.78125 11.265625-3.394531 15.433594.894531 2.085938 2.144532 3.234375 4.976563 3.234375 7.96875v64.667969c0 5.550781 4.5 10.050781 10.050781 10.050781 5.546875 0 10.046875-4.5 10.046875-10.050781v-39.621094c0-3.859375.921875-7.347656 2.738281-10.378906 1.398438-2.335937 3.617188-3.976563 6.246094-4.617187 2.5-.609376 5.058594-.214844 7.191406 1.097656l.730469.457031c2.722657 1.703125 4.347657 4.632813 4.347657 7.84375v55.703125c0 5.550781 4.5 10.050781 10.050781 10.050781s10.050781-4.5 10.050781-10.050781v-17.824219c0-3.664062 1.105469-7.191406 3.195312-10.203125 2.460938-3.542968 6.578126-5.367187 10.492188-4.640625 1.910156.351563 3.695312 1.226563 5.15625 2.53125 2.273438 2.027344 3.574219 4.933594 3.574219 7.976563v38.722656c0 5.550781 4.5 10.050781 10.050781 10.050781 5.546875 0 10.046875-4.5 10.046875-10.050781v-38.722656c0-8.765625-3.75-17.140625-10.292969-22.976563-4.210937-3.753906-9.355468-6.277343-14.882812-7.296875-5.925782-1.09375-11.941406-.320312-17.339844 2.015625v-5.28125c0-10.1875-5.160156-19.492187-13.796875-24.890625l-.828125-.515625c-6.761719-4.164062-14.753906-5.414062-22.511719-3.519531-1.789062.433594-3.515625 1.027344-5.167969 1.757812-1.332031-5.324218-4.050781-10.230468-7.964843-14.261718-8.847657-9.105469-21.734375-11.828125-33.019531-7.835938v-40.800781c0-8.625-3.640626-16.921875-9.984376-22.765625-6.089843-5.605469-13.992187-8.511719-22.257812-8.15625-8.265625.34375-15.902344 3.886719-21.5 9.980469l-.132812.148437c-5.265626 5.726563-8.164063 13.164063-8.164063 20.941406v105.664063c-6.890625-11.511719-17.675781-19.917969-30.617187-23.800781-11.226563-3.371094-23.457032 1.195312-29.730469 11.105468-4.554688 7.183594-5.339844 16.171876-2.101563 24.039063l16.535156 40.203125c6.117188 14.882812 9.222657 30.585938 9.222657 46.675781v10.261719c0 15.203125 5.921875 29.5 16.671875 40.253906l18.363281 18.363282c4.449219 4.449218 6.902344 10.367187 6.902344 16.660156v21.734375h-5.789063c-2.667968.003906-5.226562 1.0625-7.109375 2.953125-1.886719 1.886718-2.941406 4.445312-2.9375 7.113281l.074219 47.078125c.007812 5.542969 4.503906 10.035156 10.050781 10.035156h.003907l174.421874-.050781c2.667969-.003906 5.226563-1.0625 7.109376-2.953125 1.886718-1.886719 2.941406-4.445312 2.9375-7.113281l-.074219-47.078125c-.007813-5.542969-4.503907-10.035156-10.050781-10.035156l-2.929688.003906v-27.171875c.003906-3.390625 1.054688-6.628907 3.039062-9.371094zm-164.421874 83.664063-.042969-26.976563 154.324219-.046875.042968 26.980469zm0 0"/><path d="m21.664062 97.0625 15.476563 8.933594c1.582031.914062 3.308594 1.347656 5.011719 1.347656 3.476562 0 6.851562-1.800781 8.714844-5.023438 2.777343-4.808593 1.128906-10.953124-3.679688-13.730468l-15.476562-8.933594c-4.804688-2.777344-10.949219-1.128906-13.726563 3.675781-2.773437 4.808594-1.128906 10.953125 3.679687 13.730469zm0 0"/><path d="m21.097656 149.644531c.660156 0 1.328125-.066406 2-.199219l17.515625-3.535156c5.441407-1.097656 8.964844-6.394531 7.867188-11.835937-1.097657-5.441407-6.398438-8.957031-11.839844-7.863281l-17.515625 3.53125c-5.441406 1.097656-8.964844 6.398437-7.867188 11.835937.960938 4.769531 5.15625 8.066406 9.839844 8.066406zm0 0"/><path d="m251.488281 331.40625c-2.078125-5.144531-7.9375-7.628906-13.082031-5.546875-5.148438 2.078125-7.632812 7.933594-5.550781 13.082031l.09375.230469c1.578125 3.910156 5.34375 6.285156 9.316406 6.285156 1.257813 0 2.53125-.238281 3.765625-.734375 5.144531-2.082031 7.628906-7.9375 5.550781-13.085937zm0 0"/></svg>
									<h2 tabindex="-1" class="ma_interest_hding" style="font-size: 21px;">{{LANG Select your music preference}}</h2>
                                    <ul class="ma_interest_list">
                                        <?php
                                        foreach($music->categories as $key => $category){
                                            $is_exist = $db->where('user_id', $music->user->id)->where('category_id', $key)->getOne(T_USER_INTEREST,'count(id) as cnt')->cnt;
                                            if($is_exist == 0) {
                                        ?>
                                            <li>
                                                <input type="checkbox" class="interest-genre" id="cat_<?php echo $key;?>" value="<?php echo $key;?>" style="position: inherit;">
                                                <label for="cat_<?php echo $key;?>"><?php echo $category;?></label>
                                            </li>
                                        <?php }else{ ?>
                                            <li>
                                                <input type="checkbox" class="interest-genre" id="cat_<?php echo $key;?>" value="<?php echo $key;?>" checked="checked" style="position: inherit;">
                                                <label for="cat_<?php echo $key;?>"><?php echo $category;?></label>
                                            </li>
                                        <?php } ?>
                                        <?php } ?>
                                    </ul>
								</div>
							</div>
							<div class="last-sett-btn modal-footer">
								<input type="hidden" id="user-id" name="user_id" value="{{USER id}}">
								<button class="btn btn-primary btn-save_intrsts">{{LANG Save}}</button>
							</div>
						</form>
                    </div>
                </div>
            </div>
            <!-- End Settings -->
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(document).on('click','.interest-genre',function(e){
            //e.preventDefault();
            // if( $(this).prop('checked') === true ){
            //     $(this).prop('checked', false);
            //     $(this).attr('checked', false);
            // }else {
            //     $(this).prop('checked', true);
            //     $(this).attr('checked', true);
            // }
        });
        $(document).on('click','.btn-save_intrsts',function(e){
            e.preventDefault();
            let genres = [];
            let formData = new FormData();
            $(".interest-genre:checked").each ( function() {
                genres.push($(this).val());
            });
            if(genres.length > 0) {
                formData.append('genres', genres);
            }else{
				$('#output-interest-success').empty();
				$('#output-interest-errors').html('{{LANG You have to choose your favorites genres below}}');
                return;
            }
            $('.btn-save_intrsts').html('{{LANG Please wait...}}');
            $.ajax({
                url: '{{CONFIG ajax_url}}/user/update-interest?hash_id=' + getHashID(),
                type : 'POST',
                data : formData,
                contentType:false,
                cache: false,
                processData:false,
                success : function(data) {
                    if (data.status == 200) {
                        $('.btn-save_intrsts').html('{{LANG Save}}');
						$('#output-interest-errors').empty();
						$('#output-interest-success').html('{{LANG Your selection saved successfully.}}');
                        //ajaxRedirect('discover');
                    }
                }
            });
        });
    });
</script>